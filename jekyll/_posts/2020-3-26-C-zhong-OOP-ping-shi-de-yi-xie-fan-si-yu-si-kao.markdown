---
layout: post
title: C#中OOP平时的一些反思与思考 
date: 2020-03-26 13:02:19 +0900
categories: 技术
issue_id: 91
---

“从来就没有什么元编程，只有编程而已。”这是《Ruby元编程》中，讲完所有的元编程技巧之后，作者说的话，我感觉很有道理，不管用什么方式，本质上都是在追求让代码有更高的可读性，更少的耦合，更少的重复，封装也好，继承也好都只是实现这个目标的一些手段。

最近在学unity和C#，准备把以前写到一般坑了的战棋游戏重新开工，写了一些代码。C#也是一种OOP的语言，但与Ruby和Python不同，它不是脚本语言，而是需要编译的静态语言，在写的时候，会有一种与之前写脚本语言不太一样的感觉。这里就记录一些C#中OOP实现上的思考，可能大部分只是提出问题，解决问题的方式等之后C#学得更深一点再来看看，可能会有一些不同的想法。

- 技能、物品、以及攻击，都需要两个范围，一个是射程（与动作发起者的距离），一个是攻击范围（与目标点的距离）。对于范围，我写了一个Range类，来实现一些坐标上的判断函数，如Reach（可否覆盖到）等等。
  - 但既然技能 物品 攻击，都需要两个范围，那我总不能在这三个地方都写一模一样的代码吧。
  - 一个解决办法是使用类，让技能类 物品类 攻击都继承自一个ActionWithRange的类。但这显然有点问题，因为C#不支持多重继承，而这个"WithRange"的特性又不是这些类的主要特性。
  - 使用接口是否可以？接口只能定义方法和属性，不能定义实例变量。
  - 另一个方法是把这两个Range再封装成一个类，然后技能 物品 攻击中，再定义一个这个类的对象。

