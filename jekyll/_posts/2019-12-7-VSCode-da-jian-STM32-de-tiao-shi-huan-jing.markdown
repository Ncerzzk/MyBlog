---
layout: post
title: VSCode搭建STM32的调试环境
date: 2019-12-07 18:38:13 +0900
categories: 技术 硬件
issue_id: 65
---
大家都知道VScode是个好用的编辑器，通过配置也能成为IDE。

之前在国内的时候其实和王智折腾过这事了，不过当时比较忙，也没把步骤好好记下来，以为应该是忘不了的，结果今天在这个电脑上要重新搭一下，还是费了一番功夫。

主要是几个步骤：

- 下载安装ARM的GCC工具链，主要是为了后面编译和VScode的智能提示
  - 下载完后，如果之前没设置过，有些头文件如“String.h”会找不到，显示一个灯泡，可以点进那个灯泡去修改编译器路径，改成ARM_GCC的安装路径就行了
- 下载安装mingGW，主要是为了安装make
  - 安装完之后，默认make程序的文件名好像是mingw32_make.exe，可以给他改成make.exe，这样之后输入好打一点
  - 记得添加到环境变量中
- 安装VScode的cortex-debug插件
- 到STM32官网找相应芯片的SVD文件(为了调试时候能显示寄存器等信息),放到目录下
- 增加一个调试器，选择cortex-debug，然后配置几个参数，主要是 执行文件 、 svd 、芯片(device)等。
- 如果用Jlink的话，得把jlink的目录也添加到环境变量中


其他的一些记录

makefile中如果要写：某个目录下的所有.c文件，可以类似这样写：$(wildcard mylib/*.c) 




