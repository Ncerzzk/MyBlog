# 战棋系统的UI逻辑记录
ctime:2020-03-31 11:15:47 +0900|1585620947

标签（空格分隔）： 技术

---

- 平时鼠标移动时，鼠标悬浮的格子颜色改变，此时鼠标的指针只是一格
  - 旁边显示一个窗口，来表示此时格子的坐标
  - 之后可以在加点信息，显示地形等
- 点击Actor，弹出菜单（移动 攻击 技能 物品 待机）
  - 按下ESC 或者点击其他地方，菜单消失
  - 点击 移动
    - 显示角色移动范围
    - 按下ESC，移动范围消失
    - 点击移动范围内的某一格，移动角色到该格，移动范围消失
    - 如果该格有物体或者处于移动范围之外，无动作。
    - 按下ESC，取消移动
  - 点击 攻击/技能/物品
    - 显示攻击范围(Target arrange)
    - 如果角色可以攻击的目标数不止一个，例如是一个十字形，最多能攻击5个人，那么此时当鼠标在攻击范围中移动时，鼠标指针应该变成一个十字
    - 按下ESC，攻击范围消失
    - 点击敌人，则攻击目标
    - 如果敌人位于移动范围之外，无动作
  - 每执行一个动作，都需要刷新一下菜单
  - 点击 待命
    - 角色本回合行动结束 
- 点击不能移动的角色
  - 显示它的移动范围
  

## 实现
### 鼠标指针
- 需求
  - 平时指针仅有一格，用于指向鼠标位置
  - 特殊情况，如攻击 技能的时候，可变成其他形状，如十字等
  - 尽量快
- 实现
  - 鼠标指针类
    - 每次更新判断当前Hover的格子与上次是否一样，如果不一样，则将上次的显示的格子们的颜色复原，然后将此次要显示的格子们的颜色修改
 
### 